(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{4087:function(e,n,t){Promise.resolve().then(t.bind(t,1310))},1310:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var a=t(7573),r=t(7653),s=t(1695),i=t(6597),l=t(5118),o=t(4578),c=t(1917),u=t(4658),d=t(4522);let m={WOOD:"목",FIRE:"화",EARTH:"토",METAL:"금",WATER:"수"},p={VERY_LOW:"매우 부족",LOW:"부족",BALANCED:"균형",HIGH:"강함",VERY_HIGH:"매우 강함"};function h(e){let n=e.trim();return n.length>0?n:"뜻 정보 없음"}function f(e){return"".concat(e.nameHangul,":").concat(e.hanjaPair[0]).concat(e.hanjaPair[1])}function j(e){var n;return null!==(n=m[e])&&void 0!==n?n:e}function y(){return(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"feedback-icon","aria-hidden":"true",focusable:"false",children:(0,a.jsx)("path",{d:"M7 11v9M7 20H4a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h3m0 8h8.36a2 2 0 0 0 1.96-1.62l1.2-6A2 2 0 0 0 16.56 10H13V6.5A2.5 2.5 0 0 0 10.5 4L7 11Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function g(){return(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"feedback-icon","aria-hidden":"true",focusable:"false",children:(0,a.jsx)("path",{d:"M7 13V4M7 4H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h3m0-8h8.36a2 2 0 0 1 1.96 1.62l1.2 6A2 2 0 0 1 16.56 14H13v3.5A2.5 2.5 0 0 1 10.5 20L7 13Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function b(){let e=(0,s.useRouter)(),n=(0,d.T)(e=>e.input),t=(0,d.T)(e=>e.surnameHangul),m=(0,d.T)(e=>e.setInput),b=(0,d.T)(e=>e.setSurnameHangul),x=(0,d.T)(e=>e.summary),N=(0,d.T)(e=>e.results),w=(0,d.T)(e=>e.setResults),k=(0,d.T)(e=>e.hasHydrated),v=(0,d.T)(e=>e.reset),[S,H]=(0,r.useState)({}),[P,A]=(0,r.useState)({}),[T,E]=(0,r.useState)(!1),[C,O]=(0,r.useState)({}),[F,M]=(0,r.useState)({});(0,r.useEffect)(()=>{k&&(x||e.replace("/premium"))},[k,e,x]),(0,r.useEffect)(()=>{E((0,u.m)({hostname:window.location.hostname}))},[]);let L=(0,r.useMemo)(()=>N.slice(0,20),[N]),R=(0,r.useMemo)(()=>L.map(e=>f(e)),[L]),K=t.trim().length>0&&n.surnameHanja.trim().length>0,W=(0,c.c)(window.location.pathname);if((0,r.useEffect)(()=>{H(e=>(0,o.N)(e,R)),A(e=>(0,o.G)(e,R))},[R]),!k||!x)return(0,a.jsx)(a.Fragment,{});let I=async e=>{let n=e.trim();if(n&&"pending"!==C[n]&&"done"!==C[n]){O(e=>({...e,[n]:"pending"}));try{await (0,l.yF)(n),O(e=>({...e,[n]:"done"}))}catch(e){console.error("[premium-result] mark not-inmyong failed",e),O(e=>({...e,[n]:"error"}))}}},_=async e=>{let n=f(e);if("pending"!==F[n]&&"done"!==F[n]){M(e=>({...e,[n]:"pending"}));try{await (0,l.zT)(e.nameHangul),M(e=>({...e,[n]:"done"}))}catch(e){console.error("[premium-result] blacklist update failed",e),M(e=>({...e,[n]:"error"}))}}},V=async(e,a)=>{if(!K)return;let r=f(e);if("pending"!==S[r]&&"done"!==S[r]){H(e=>({...e,[r]:"pending"})),A(e=>({...e,[r]:a}));try{await (0,l.le)({surnameHangul:t,surnameHanja:n.surnameHanja,nameHangul:e.nameHangul,hanjaPair:e.hanjaPair,vote:a}),H(e=>({...e,[r]:"done"}))}catch(e){console.error("[premium-result] feedback submit failed",e),H(e=>({...e,[r]:"idle"})),A(e=>({...e,[r]:void 0}))}}};return(0,a.jsxs)(i.TdsScreen,{title:"프리미엄 추천 결과",description:"사주 점수를 우선으로 정렬했습니다.",children:[(0,a.jsxs)("section",{className:"tds-premium-summary",children:[(0,a.jsxs)("div",{className:"tds-premium-summary-head",children:[(0,a.jsx)("h2",{className:"tds-premium-summary-title",children:"4주8자"}),x.hasHourPillar?null:(0,a.jsx)("span",{className:"tds-premium-badge",children:"시주 미반영"})]}),(0,a.jsxs)("div",{className:"tds-premium-pillars",children:[(0,a.jsxs)("span",{className:"tds-premium-pillar",children:["년주 ",x.pillars.year.hangul]}),(0,a.jsxs)("span",{className:"tds-premium-pillar",children:["월주 ",x.pillars.month.hangul]}),(0,a.jsxs)("span",{className:"tds-premium-pillar",children:["일주 ",x.pillars.day.hangul]}),x.pillars.hour?(0,a.jsxs)("span",{className:"tds-premium-pillar",children:["시주 ",x.pillars.hour.hangul]}):null]}),(0,a.jsx)("p",{className:"tds-premium-summary-line",children:x.oneLineSummary}),(0,a.jsxs)("p",{className:"tds-premium-weak",children:["부족 TOP2: ",x.weakTop2.map(e=>j(e)).join(" / ")]}),(0,a.jsx)("ul",{className:"tds-premium-dist-list",children:x.distStatus.map(e=>{let n=x.weakTop2.includes(e.element);return(0,a.jsxs)("li",{className:"tds-premium-dist-item".concat(n?" is-weak":""),children:[(0,a.jsx)("span",{className:"tds-premium-dist-element",children:j(e.element)}),(0,a.jsxs)("span",{className:"tds-premium-dist-percent",children:[e.percent.toFixed(1),"%"]}),(0,a.jsx)("span",{className:"tds-premium-dist-status",children:p[e.status]})]},e.element)})})]}),(0,a.jsx)("p",{className:"tds-premium-notice",children:"추천 정렬은 사주 점수 기준이며 발음 점수는 참고용입니다."}),0===L.length?(0,a.jsxs)("div",{className:"result-actions",children:[(0,a.jsx)("p",{className:"tds-description",children:"추천 결과가 비어 있어요. 다시 시도해 주세요."}),(0,a.jsx)(i.Ob,{onClick:()=>{e.replace(W)},children:"다시 분석하기"})]}):(0,a.jsx)("section",{className:"result-list",children:L.map(e=>{let n=f(e),t=[{hanja:e.hanjaPair[0],reading:e.readingPair[0],meaning:h(e.meaningKwPair[0])},{hanja:e.hanjaPair[1],reading:e.readingPair[1],meaning:h(e.meaningKwPair[1])}];return(0,a.jsxs)(i.Sv,{children:[(0,a.jsx)("div",{className:"result-header-row",children:(0,a.jsxs)("span",{className:"score-chip",children:["#",e.rank]})}),(0,a.jsx)("p",{className:"pron-emphasis",children:e.nameHangul}),(0,a.jsx)("ul",{className:"hanja-detail-list",children:t.map((n,t)=>(0,a.jsxs)("li",{className:"hanja-detail-item",children:[(0,a.jsx)("span",{className:"hanja-char",children:n.hanja}),(0,a.jsx)("span",{className:"hanja-reading",children:n.reading}),(0,a.jsx)("span",{className:"hanja-meaning",children:n.meaning}),T?(0,a.jsx)("button",{type:"button",className:"local-admin-btn local-admin-btn-minimal".concat("done"===C[n.hanja]?" is-done":"error"===C[n.hanja]?" is-error":""),disabled:"pending"===C[n.hanja],onClick:()=>{I(n.hanja)},children:"비인명용 처리"}):null]},"".concat(f(e),"-").concat(n.hanja,"-").concat(n.reading,"-").concat(t)))}),(0,a.jsxs)("p",{className:"tds-premium-star",children:["사주 보완 ⭐ ",e.sajuScore5.toFixed(1)]}),(0,a.jsxs)("p",{className:"tds-premium-star",children:["발음 조화 ⭐ ",e.soundScore5.toFixed(1)]}),(0,a.jsx)("ul",{className:"reason-list",children:e.why.slice(0,2).map((e,t)=>(0,a.jsx)("li",{children:e},"".concat(n,"-").concat(t)))}),(0,a.jsxs)("div",{className:"feedback-row is-split",children:[(0,a.jsx)("button",{type:"button",className:"feedback-btn is-like".concat("like"===P[n]?" is-selected":""),disabled:!K||"pending"===S[n]||"done"===S[n],onClick:()=>{V(e,"like")},children:(0,a.jsxs)("span",{className:"feedback-content",children:[(0,a.jsx)(y,{}),(0,a.jsx)("span",{children:"좋아요"})]})}),(0,a.jsx)("button",{type:"button",className:"feedback-btn is-dislike".concat("dislike"===P[n]?" is-selected":""),disabled:!K||"pending"===S[n]||"done"===S[n],onClick:()=>{V(e,"dislike")},children:(0,a.jsxs)("span",{className:"feedback-content",children:[(0,a.jsx)(g,{}),(0,a.jsx)("span",{children:"싫어요"})]})})]}),T?(0,a.jsx)("div",{className:"local-admin-name-row",children:(0,a.jsx)("button",{type:"button",className:"local-admin-btn local-admin-btn-minimal".concat("done"===F[n]?" is-done":"error"===F[n]?" is-error":""),disabled:"pending"===F[n],onClick:()=>{_(e)},children:"이름 블랙리스트"})}):null]},n)})}),(0,a.jsx)("p",{className:"tds-premium-free-note",children:"현재 한시적 무료로 제공 중입니다."}),(0,a.jsxs)("div",{className:"result-actions",children:[T?(0,a.jsx)("div",{className:"local-admin-name-row",children:(0,a.jsx)("button",{type:"button",className:"local-admin-btn local-admin-btn-minimal",onClick:()=>{let n=(0,c.k)();m(n.input),b(n.surnameHangul),w([]),e.push(W)},children:"로컬 자동 입력으로 바로 조회"})}):null,(0,a.jsx)(i.Ob,{onClick:()=>{v(),e.replace("/premium")},children:"다시 입력"})]})]})}},6597:function(e,n,t){"use strict";t.d(n,{M4:function(){return l},NV:function(){return c},Ob:function(){return o},Sv:function(){return m},TdsBottomCtaDouble:function(){return d},TdsLinkButton:function(){return u},TdsScreen:function(){return s},dE:function(){return i}});var a=t(7573),r=t(8146);function s(e){let{title:n,description:t,titleIconSrc:r,titleIconAlt:s,children:i}=e;return(0,a.jsx)("main",{className:"tds-screen",children:(0,a.jsxs)("section",{className:"tds-panel",children:[n?(0,a.jsx)("h1",{className:"tds-title",children:(0,a.jsxs)("span",{className:"tds-title-row",children:[r?(0,a.jsx)("img",{className:"tds-title-icon",src:r,alt:null!=s?s:"","aria-hidden":!s||void 0}):null,(0,a.jsx)("span",{children:n})]})}):null,t?(0,a.jsx)("p",{className:"tds-description",children:t}):null,i]})})}function i(e){let{label:n,value:t,options:r,onChange:s}=e;return(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:n}),(0,a.jsx)("div",{className:"tds-segmented",role:"tablist","aria-label":n,children:r.map(e=>(0,a.jsx)("button",{type:"button",className:"tds-segmented-option".concat(t===e.value?" is-selected":""),role:"tab","aria-selected":t===e.value,onClick:()=>s(e.value),children:e.label},e.value))})]})}function l(e){let{checked:n,label:t,onChange:r}=e;return(0,a.jsxs)("label",{className:"tds-switch-row",children:[(0,a.jsx)("span",{className:"tds-label",children:t}),(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":n,className:"tds-switch".concat(n?" is-on":""),onClick:()=>r(!n),children:(0,a.jsx)("span",{className:"tds-switch-thumb"})})]})}function o(e){let{children:n,onClick:t,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-primary",onClick:t,disabled:s,children:(0,a.jsx)("span",{className:"tds-button-label",children:n})})}function c(e){let{children:n,onClick:t,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-secondary",onClick:t,disabled:s,children:(0,a.jsx)("span",{className:"tds-button-label",children:n})})}function u(e){let{children:n,href:t,variant:s="primary"}=e;return(0,a.jsx)(r.default,{href:t,className:"tds-button ".concat("secondary"===s?"tds-button-secondary":"tds-button-primary"),children:(0,a.jsx)("span",{className:"tds-button-label",children:n})})}function d(e){let{left:n,right:t,topAccessory:r}=e;return(0,a.jsxs)("div",{className:"tds-bottom-cta tds-bottom-cta-double",children:[r?(0,a.jsx)("div",{className:"tds-bottom-cta-top",children:r}):null,(0,a.jsxs)("div",{className:"tds-bottom-cta-actions",children:[(0,a.jsx)("div",{children:n}),(0,a.jsx)("div",{children:t})]})]})}function m(e){let{children:n}=e;return(0,a.jsx)("article",{className:"tds-card",children:n})}},5118:function(e,n,t){"use strict";function a(e){let n=e.startsWith("/")?e:"/".concat(e),t=function(){let e="https://naametoss.vercel.app".trim();return e.endsWith("/")?e.slice(0,-1):e}();return t?"".concat(t).concat(n):n}async function r(e,n){let t=e.trim();if(!t)return{surnameReading:"",options:[],autoSelectedHanja:null};let r=await fetch("".concat(a("/api/surname/options"),"?reading=").concat(encodeURIComponent(t)),{method:"GET",cache:"no-store",signal:n});if(!r.ok){let e=await r.text();throw Error("[api] surname options failed: ".concat(r.status," ").concat(e))}let s=await r.json();if(!(s&&"object"==typeof s&&"string"==typeof s.surnameReading&&Array.isArray(s.options)&&("string"==typeof s.autoSelectedHanja||null===s.autoSelectedHanja)&&s.options.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.hanja&&"boolean"==typeof e.isDefault&&"number"==typeof e.popularityRank&&Number.isFinite(e.popularityRank))))throw Error("[api] invalid surname options response");return s}async function s(e){let n=await fetch(a("/api/recommend/free"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();throw Error("[api] free recommend failed: ".concat(n.status," ").concat(e))}let t=await n.json();if(!function(e){if(!e||"object"!=typeof e)return!1;let n=e.results;return!!Array.isArray(n)&&n.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.nameHangul&&Array.isArray(e.hanjaPair)&&2===e.hanjaPair.length&&"string"==typeof e.hanjaPair[0]&&"string"==typeof e.hanjaPair[1]&&Array.isArray(e.readingPair)&&2===e.readingPair.length&&"string"==typeof e.readingPair[0]&&"string"==typeof e.readingPair[1]&&Array.isArray(e.meaningKwPair)&&2===e.meaningKwPair.length&&"string"==typeof e.meaningKwPair[0]&&"string"==typeof e.meaningKwPair[1]&&"number"==typeof e.score&&Number.isFinite(e.score)&&Array.isArray(e.reasons))}(t))throw Error("[api] invalid response shape");return{results:t.results.slice(0,5)}}async function i(e){let n=await fetch(a("/api/recommend/premium"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();throw Error("[api] premium recommend failed: ".concat(n.status," ").concat(e))}let t=await n.json();if(!function(e){if(!e||"object"!=typeof e||!e.summary||"object"!=typeof e.summary||!Array.isArray(e.results))return!1;let n=e.summary;return!!(("IMPROVE"===n.mode||"HARMONY"===n.mode)&&"string"==typeof n.oneLineSummary&&Array.isArray(n.weakTop2)&&2===n.weakTop2.length&&"boolean"==typeof n.hasHourPillar&&n.pillars&&"object"==typeof n.pillars&&n.distSaju&&"object"==typeof n.distSaju&&Array.isArray(n.distStatus))&&e.results.every(e=>!!e&&"object"==typeof e&&"number"==typeof e.rank&&Number.isFinite(e.rank)&&"string"==typeof e.nameHangul&&Array.isArray(e.hanjaPair)&&2===e.hanjaPair.length&&"string"==typeof e.hanjaPair[0]&&"string"==typeof e.hanjaPair[1]&&Array.isArray(e.readingPair)&&2===e.readingPair.length&&"string"==typeof e.readingPair[0]&&"string"==typeof e.readingPair[1]&&Array.isArray(e.meaningKwPair)&&2===e.meaningKwPair.length&&"string"==typeof e.meaningKwPair[0]&&"string"==typeof e.meaningKwPair[1]&&"number"==typeof e.score&&Number.isFinite(e.score)&&"number"==typeof e.sajuScore5&&Number.isFinite(e.sajuScore5)&&"number"==typeof e.soundScore5&&Number.isFinite(e.soundScore5)&&"number"==typeof e.engineScore01&&Number.isFinite(e.engineScore01)&&Array.isArray(e.why))}(t))throw Error("[api] invalid premium response shape");return{summary:t.summary,results:t.results.slice(0,20)}}async function l(e){let n=await fetch(a("/api/feedback/name"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();if(503===n.status&&e.includes("Feedback backend is not configured"))return;throw Error("[api] feedback submit failed: ".concat(n.status," ").concat(e))}}async function o(e){let n=Array.from(e.trim().normalize("NFC")).slice(0,1).join("");if(!n)throw Error("[api] invalid hanja char");let t=await fetch("/api/admin/local/hanja/not-inmyong",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify({char:n})});if(!t.ok){let e=await t.text();throw Error("[api] mark not-inmyong failed: ".concat(t.status," ").concat(e))}}async function c(e){let n=e.trim().normalize("NFC");if(!n)throw Error("[api] invalid nameHangul");let t=await fetch("/api/admin/local/blacklist-word",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify({nameHangul:n})});if(!t.ok){let e=await t.text();throw Error("[api] blacklist update failed: ".concat(t.status," ").concat(e))}return{inserted:!0===(await t.json()).inserted}}t.d(n,{le:function(){return l},mS:function(){return r},o4:function(){return s},oj:function(){return i},yF:function(){return o},zT:function(){return c}})},4578:function(e,n,t){"use strict";function a(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function r(e,n){if(Object.keys(e).length!==n.length)return!1;for(let t of n)if(!a(e,t))return!1;return!0}function s(e,n){let t=!r(e,n),s={};for(let r of n){if(a(e,r)){s[r]=e[r];continue}s[r]="idle",t=!0}return t?s:e}function i(e,n){let t=!r(e,n),s={};for(let r of n){if(a(e,r)){s[r]=e[r];continue}s[r]=void 0,t=!0}return t?s:e}t.d(n,{G:function(){return i},N:function(){return s}})},1917:function(e,n,t){"use strict";t.d(n,{c:function(){return l},k:function(){return o}});let a=[{hangul:"김",hanja:"金"},{hangul:"이",hanja:"李"},{hangul:"박",hanja:"朴"},{hangul:"최",hanja:"崔"},{hangul:"정",hanja:"鄭"}],r=["MALE","FEMALE"];function s(e,n){return Math.max(0,Math.min(e-1,Math.floor(n()*e)))}function i(e){return e.toString().padStart(2,"0")}function l(e){let n=e.trim();if(!n)return"/premium/loading";let t=(n.startsWith("/")?n:"/".concat(n)).replace(/\/+$/,""),a=t.replace(/\/premium\/result$/,"/premium/loading");if(a!==t)return a;let r=t.replace(/\/premium$/,"/premium/loading");return r!==t?r:"/premium/loading"}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,n=a[s(a.length,e)],t=r[s(r.length,e)],l=function(e){let n=1970+s(41,e),t=1+s(12,e),a=1+s(new Date(n,t,0).getDate(),e);return"".concat(n,"-").concat(i(t),"-").concat(i(a))}(e),o=function(e){let n=s(24,e),t=s(60,e);return"".concat(i(n),":").concat(i(t))}(e);return{surnameHangul:n.hangul,input:{birth:{calendar:"SOLAR",date:l,time:o},surnameHanja:n.hanja,gender:t}}}},4522:function(e,n,t){"use strict";t.d(n,{T:function(){return o}});var a=t(8321),r=t(4452);let s={birth:{calendar:"SOLAR",date:""},surnameHanja:"",gender:"UNISEX"},i=(0,r.FL)(()=>window.sessionStorage);function l(e){return Number.isFinite(e)?Math.round(2*Math.max(0,Math.min(5,e)))/2:0}let o=(0,a.U)()((0,r.tJ)(e=>({input:s,surnameHangul:"",summary:null,results:[],hasHydrated:!1,setHasHydrated:n=>e({hasHydrated:n}),setInput:n=>e({input:n}),setSurnameHangul:n=>e({surnameHangul:n}),setSummary:n=>e({summary:n}),setResults:n=>e({results:n.slice(0,20).map((e,n)=>({...e,rank:Number.isFinite(e.rank)?e.rank:n+1,sajuScore5:l(e.sajuScore5),soundScore5:l(e.soundScore5),engineScore01:Math.max(0,Math.min(1,e.engineScore01)),why:Array.isArray(e.why)&&e.why.length>0?e.why:["추천 이유를 계산 중입니다."]}))}),reset:()=>e({input:s,surnameHangul:"",summary:null,results:[]})}),{name:"namefit-toss-premium-store-v1",storage:i,partialize:e=>({input:e.input,surnameHangul:e.surnameHangul,summary:e.summary,results:e.results}),onRehydrateStorage:()=>(e,n)=>{n&&console.error("[store] premium store rehydrate failed",n),null==e||e.setHasHydrated(!0)}}))},4658:function(e,n,t){"use strict";t.d(n,{m:function(){return i}});var a=t(8571);let r=[".vercel.app",".apps.tossmini.com",".private-apps.tossmini.com"];function s(e){return e.trim().toLowerCase()}function i(e){let{nodeEnv:n="production",vercel:t=a.env.VERCEL,hostname:i=""}=e;return!("development"!==(null!=n?n:"").trim()||(null!=t?t:"").trim().length>0||!i.trim()||function(e){let n=s(e);return r.some(e=>n.endsWith(e))}(i))&&function(e){let n=s(e);return"localhost"===n||"127.0.0.1"===n||"::1"===n}(i)}}},function(e){e.O(0,[146,513,293,528,744],function(){return e(e.s=4087)}),_N_E=e.O()}]);
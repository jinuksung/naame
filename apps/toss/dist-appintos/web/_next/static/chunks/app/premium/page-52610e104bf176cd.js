(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{5654:function(e,t,n){Promise.resolve().then(n.bind(n,5842))},5842:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(7573),r=n(7653),i=n(1695),s=n(6597),l=n(5118),u=n(7577),o=n(1917),m=n(4658),c=n(5651),d=n(4522);function h(e,t){return e.replace(/[^\d]/g,"").slice(0,t)}function p(e){return e.toString().padStart(2,"0")}function f(e){let t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e.trim());return t?{year:t[1],month:Number.parseInt(t[2],10).toString(),day:Number.parseInt(t[3],10).toString()}:{year:"",month:"",day:""}}function g(e){if(!e)return{meridiem:"AM",hour:"",minute:""};let t=/^(\d{2}):(\d{2})$/.exec(e.trim());if(!t)return{meridiem:"AM",hour:"",minute:""};let n=Number.parseInt(t[1],10),a=Number.parseInt(t[2],10);return n<0||n>23||a<0||a>59?{meridiem:"AM",hour:"",minute:""}:0===n?{meridiem:"AM",hour:"12",minute:a.toString()}:n<12?{meridiem:"AM",hour:n.toString(),minute:a.toString()}:12===n?{meridiem:"PM",hour:"12",minute:a.toString()}:{meridiem:"PM",hour:(n-12).toString(),minute:a.toString()}}function v(e){return Array.from(e).length}function j(){let e=(0,i.useRouter)(),t=(0,d.T)(e=>e.input),n=(0,d.T)(e=>e.surnameHangul),j=(0,d.T)(e=>e.setInput),x=(0,d.T)(e=>e.setSurnameHangul),N=(0,d.T)(e=>e.setSummary),b=(0,d.T)(e=>e.setResults),S=f(t.birth.date),y=g(t.birth.time),[H,M]=(0,r.useState)(S.year),[w,A]=(0,r.useState)(S.month),[C,k]=(0,r.useState)(S.day),[I,R]=(0,r.useState)(t.birth.calendar),[E,L]=(0,r.useState)(!0===t.birth.isLeapMonth),[T,O]=(0,r.useState)(y.meridiem),[U,D]=(0,r.useState)(y.hour),[P,_]=(0,r.useState)(y.minute),[F,Q]=(0,r.useState)(()=>(0,u.Q)(n,2)),[Y,$]=(0,r.useState)(t.surnameHanja),[W,z]=(0,r.useState)([]),[J,V]=(0,r.useState)(!1),[X,q]=(0,r.useState)(null),[B,G]=(0,r.useState)(t.gender),[K,Z]=(0,r.useState)({}),[ee,et]=(0,r.useState)(!1),en=(0,r.useRef)(null),ea=(0,r.useRef)(null),er=(0,r.useRef)(null);(0,r.useEffect)(()=>{et((0,m.m)({hostname:window.location.hostname}))},[]),(0,r.useEffect)(()=>{let e=(0,u.Q)(F,2);if(!e){z([]),$(""),q(null),V(!1);return}let t=new AbortController,n=!1;return V(!0),q(null),z([]),(0,l.mS)(e,t.signal).then(e=>{if(!n){if(z(e.options),0===e.options.length){$(""),q("입력한 음과 일치하는 성씨 한자를 찾지 못했습니다.");return}$(t=>{var n;return e.options.some(e=>e.hanja===t)?t:null!==(n=e.autoSelectedHanja)&&void 0!==n?n:e.options[0].hanja})}}).catch(e=>{n||e instanceof DOMException&&"AbortError"===e.name||(console.error("[premium-input] 성씨 한자 조회 실패",e),z([]),$(""),q("성씨 한자 조회 중 오류가 발생했습니다."))}).finally(()=>{n||V(!1)}),()=>{n=!0,t.abort()}},[F]);let ei=(0,r.useMemo)(()=>!H.trim()||!w.trim()||!C.trim()||!F.trim()||!Y.trim()||J,[C,w,H,F,Y,J]);return(0,a.jsxs)(s.TdsScreen,{title:"네임핏 프리미엄",titleIconSrc:"/namefit-mark-inline.svg",titleIconAlt:"네임핏 로고",description:"사주 기반으로 이름을 분석해 추천합니다.",children:[(0,a.jsx)("p",{className:"tds-premium-top-note",children:"현재 한시적으로 유료 버전을 무료로 제공 중이며 추후 유료 전환될 수 있습니다."}),(0,a.jsxs)("form",{className:"tds-form",onSubmit:t=>{t.preventDefault();let n=function(e,t,n){let a=h(e,4),r=h(t,2),i=h(n,2);if(4!==a.length||!r||!i)return null;let s=Number.parseInt(a,10),l=Number.parseInt(r,10),u=Number.parseInt(i,10);if(!Number.isInteger(s)||l<1||l>12||u<1||u>31)return null;let o=new Date(Date.UTC(s,l-1,u));return o.getUTCFullYear()!==s||o.getUTCMonth()!==l-1||o.getUTCDate()!==u?null:"".concat(a,"-").concat(p(l),"-").concat(p(u))}(H,w,C),a=U.trim().length>0||P.trim().length>0,r=function(e,t,n){let a=h(t,2),r=h(n,2);if(!a&&!r||!a||!r)return null;let i=Number.parseInt(a,10),s=Number.parseInt(r,10);return i<1||i>12||s<0||s>59?null:"".concat(p("AM"===e?i%12:i%12+12),":").concat(p(s))}(T,U,P),i=(0,u.Q)(F,2),s=function(e){let t={};e.date||(t.date="생년월일을 정확히 입력해 주세요."),e.hasAnyTimeInput&&!e.time&&(t.time="출생시간을 정확히 입력해 주세요.");let n=(0,u.Q)(e.surnameHangul,2);(1>v(n)||v(n)>2)&&(t.surnameHangul="성은 1~2글자로 입력해 주세요.");let a=e.surnameHanja.trim();return(1>v(a)||v(a)>2)&&(t.surnameHanja="성씨 한자를 선택해 주세요."),t}({date:n,hasAnyTimeInput:a,time:r,surnameHanja:Y,surnameHangul:i});if(Z(s),Object.keys(s).length>0||!n)return;let l={birth:{calendar:I,date:n,..."LUNAR"===I&&E?{isLeapMonth:!0}:{},...r?{time:r}:{}},surnameHanja:Y.trim(),gender:B},m=(0,o.c)(window.location.pathname);j(l),x(i),N(null),b([]),e.push(m)},children:[(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:"생년월일"}),(0,a.jsxs)("div",{className:"tds-inline-input-row",children:[(0,a.jsxs)("label",{className:"tds-inline-unit",children:[(0,a.jsx)("input",{className:"tds-input tds-inline-input tds-inline-input-year".concat(K.date?" is-error":""),type:"text",inputMode:"numeric",pattern:"[0-9]*",value:H,placeholder:"YYYY",onChange:e=>{let t=h(e.target.value,4);if(M(t),Z(e=>({...e,date:void 0})),4===t.length){var n;null===(n=en.current)||void 0===n||n.focus()}}}),(0,a.jsx)("span",{className:"tds-inline-suffix",children:"년"})]}),(0,a.jsxs)("label",{className:"tds-inline-unit",children:[(0,a.jsx)("input",{ref:en,className:"tds-input tds-inline-input".concat(K.date?" is-error":""),type:"text",inputMode:"numeric",pattern:"[0-9]*",value:w,placeholder:"월",onChange:e=>{let t=function(e){let t=h(e,2);if(!t)return{value:"",moveNext:!1};if("1"!==t[0])return{value:t[0],moveNext:!0};if(1===t.length)return{value:"1",moveNext:!1};let n=t[1];return"0"===n||"1"===n||"2"===n?{value:"1".concat(n),moveNext:!0}:{value:"1",moveNext:!0}}(e.target.value);if(A(t.value),Z(e=>({...e,date:void 0})),t.moveNext){var n;null===(n=ea.current)||void 0===n||n.focus()}}}),(0,a.jsx)("span",{className:"tds-inline-suffix",children:"월"})]}),(0,a.jsxs)("label",{className:"tds-inline-unit",children:[(0,a.jsx)("input",{ref:ea,className:"tds-input tds-inline-input".concat(K.date?" is-error":""),type:"text",inputMode:"numeric",pattern:"[0-9]*",value:C,placeholder:"일",onChange:e=>{k(h(e.target.value,2)),Z(e=>({...e,date:void 0}))}}),(0,a.jsx)("span",{className:"tds-inline-suffix",children:"일"})]})]}),K.date?(0,a.jsx)("span",{className:"tds-error",children:K.date}):null]}),(0,a.jsx)(s.dE,{label:"양력 / 음력",value:I,options:[{label:"양력",value:"SOLAR"},{label:"음력",value:"LUNAR"}],onChange:e=>{R(e),"SOLAR"===e&&L(!1)}}),"LUNAR"===I?(0,a.jsx)(s.M4,{checked:E,label:"윤달",onChange:L}):null,(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:"출생시간"}),(0,a.jsxs)("div",{className:"tds-time-inline-row",children:[(0,a.jsxs)("div",{className:"tds-meridiem tds-meridiem-inline",children:[(0,a.jsx)("button",{type:"button",className:"tds-meridiem-option".concat("AM"===T?" is-selected":""),onClick:()=>O("AM"),children:"오전"}),(0,a.jsx)("button",{type:"button",className:"tds-meridiem-option".concat("PM"===T?" is-selected":""),onClick:()=>O("PM"),children:"오후"})]}),(0,a.jsxs)("div",{className:"tds-inline-input-row tds-time-value-row",children:[(0,a.jsxs)("label",{className:"tds-inline-unit",children:[(0,a.jsx)("input",{className:"tds-input tds-inline-input".concat(K.time?" is-error":""),type:"text",inputMode:"numeric",pattern:"[0-9]*",value:U,placeholder:"시",onChange:e=>{let t=function(e){let t=h(e,2);if(!t)return{value:"",moveNext:!1};if("1"!==t[0])return{value:t[0],moveNext:!0};if(1===t.length)return{value:"1",moveNext:!1};let n=t[1];return"0"===n||"1"===n||"2"===n?{value:"1".concat(n),moveNext:!0}:{value:"1",moveNext:!0}}(e.target.value);if(D(t.value),Z(e=>({...e,time:void 0})),t.moveNext){var n;null===(n=er.current)||void 0===n||n.focus()}}}),(0,a.jsx)("span",{className:"tds-inline-suffix",children:"시"})]}),(0,a.jsxs)("label",{className:"tds-inline-unit",children:[(0,a.jsx)("input",{ref:er,className:"tds-input tds-inline-input".concat(K.time?" is-error":""),type:"text",inputMode:"numeric",pattern:"[0-9]*",value:P,placeholder:"분",onChange:e=>{_(h(e.target.value,2)),Z(e=>({...e,time:void 0}))}}),(0,a.jsx)("span",{className:"tds-inline-suffix",children:"분"})]})]})]}),(0,a.jsx)("p",{className:"tds-helper-text",children:"모르면 비워두세요. 입력 시 더 정확한 분석이 가능합니다."}),K.time?(0,a.jsx)("span",{className:"tds-error",children:K.time}):null]}),(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:"성(음) / 성씨 한자"}),(0,a.jsxs)("div",{className:"surname-inline-row",children:[(0,a.jsx)("input",{className:"tds-input surname-inline-input".concat(K.surnameHangul?" is-error":""),type:"text",value:F,placeholder:"김",onChange:e=>{Q((0,u.Q)(e.target.value,2)),Z(e=>({...e,surnameHangul:void 0,surnameHanja:void 0}))}}),F.trim()?J?(0,a.jsx)("p",{className:"surname-inline-loading",children:"한자 조회 중…"}):W.length>0?(0,a.jsx)("div",{className:"tds-hanja-options",role:"radiogroup","aria-label":"성씨 한자 선택",children:W.map(e=>{let t=Y===e.hanja;return(0,a.jsx)("button",{type:"button",className:"tds-hanja-option".concat(t?" is-selected":""),"aria-pressed":t,onClick:()=>{$(e.hanja),Z(e=>({...e,surnameHanja:void 0}))},children:(0,a.jsx)("span",{className:"tds-hanja-main",children:e.hanja})},"".concat(e.hanja,"-").concat(e.popularityRank))})}):null:null]}),!J&&X?(0,a.jsx)("span",{className:"tds-error",children:X}):null,K.surnameHangul?(0,a.jsx)("span",{className:"tds-error",children:K.surnameHangul}):null,K.surnameHanja?(0,a.jsx)("span",{className:"tds-error",children:K.surnameHanja}):null]}),(0,a.jsx)(s.dE,{label:"성별",value:B,options:c.P,onChange:G}),(0,a.jsx)(s.Ob,{type:"submit",disabled:ei,children:"사주 기반 분석 시작"}),ee?(0,a.jsx)("div",{className:"local-admin-name-row",children:(0,a.jsx)("button",{type:"button",className:"local-admin-btn local-admin-btn-minimal",onClick:()=>{let t=(0,o.k)(),n=(0,o.c)(window.location.pathname),a=f(t.input.birth.date),r=g(t.input.birth.time);M(a.year),A(a.month),k(a.day),R(t.input.birth.calendar),L(!0===t.input.birth.isLeapMonth),O(r.meridiem),D(r.hour),_(r.minute),Q(t.surnameHangul),$(t.input.surnameHanja),G(t.input.gender),Z({}),j(t.input),x(t.surnameHangul),N(null),b([]),e.push(n)},children:"로컬 자동 입력으로 바로 조회"})}):null]})]})}},1917:function(e,t,n){"use strict";n.d(t,{c:function(){return l},k:function(){return u}});let a=[{hangul:"김",hanja:"金"},{hangul:"이",hanja:"李"},{hangul:"박",hanja:"朴"},{hangul:"최",hanja:"崔"},{hangul:"정",hanja:"鄭"}],r=["MALE","FEMALE"];function i(e,t){return Math.max(0,Math.min(e-1,Math.floor(t()*e)))}function s(e){return e.toString().padStart(2,"0")}function l(e){let t=e.trim();if(!t)return"/premium/loading";let n=(t.startsWith("/")?t:"/".concat(t)).replace(/\/+$/,""),a=n.replace(/\/premium\/result$/,"/premium/loading");if(a!==n)return a;let r=n.replace(/\/premium$/,"/premium/loading");return r!==n?r:"/premium/loading"}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,t=a[i(a.length,e)],n=r[i(r.length,e)],l=function(e){let t=1970+i(41,e),n=1+i(12,e),a=1+i(new Date(t,n,0).getDate(),e);return"".concat(t,"-").concat(s(n),"-").concat(s(a))}(e),u=function(e){let t=i(24,e),n=i(60,e);return"".concat(s(t),":").concat(s(n))}(e);return{surnameHangul:t.hangul,input:{birth:{calendar:"SOLAR",date:l,time:u},surnameHanja:t.hanja,gender:n}}}},4522:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var a=n(8321),r=n(4452);let i={birth:{calendar:"SOLAR",date:""},surnameHanja:"",gender:"UNISEX"},s=(0,r.FL)(()=>window.sessionStorage);function l(e){return Number.isFinite(e)?Math.round(2*Math.max(0,Math.min(5,e)))/2:0}let u=(0,a.U)()((0,r.tJ)(e=>({input:i,surnameHangul:"",summary:null,results:[],hasHydrated:!1,setHasHydrated:t=>e({hasHydrated:t}),setInput:t=>e({input:t}),setSurnameHangul:t=>e({surnameHangul:t}),setSummary:t=>e({summary:t}),setResults:t=>e({results:t.slice(0,20).map((e,t)=>({...e,rank:Number.isFinite(e.rank)?e.rank:t+1,sajuScore5:l(e.sajuScore5),soundScore5:l(e.soundScore5),engineScore01:Math.max(0,Math.min(1,e.engineScore01)),why:Array.isArray(e.why)&&e.why.length>0?e.why:["추천 이유를 계산 중입니다."]}))}),reset:()=>e({input:i,surnameHangul:"",summary:null,results:[]})}),{name:"namefit-toss-premium-store-v1",storage:s,partialize:e=>({input:e.input,surnameHangul:e.surnameHangul,summary:e.summary,results:e.results}),onRehydrateStorage:()=>(e,t)=>{t&&console.error("[store] premium store rehydrate failed",t),null==e||e.setHasHydrated(!0)}}))},4658:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var a=n(8571);let r=[".vercel.app",".apps.tossmini.com",".private-apps.tossmini.com"];function i(e){return e.trim().toLowerCase()}function s(e){let{nodeEnv:t="production",vercel:n=a.env.VERCEL,hostname:s=""}=e;return!("development"!==(null!=t?t:"").trim()||(null!=n?n:"").trim().length>0||!s.trim()||function(e){let t=i(e);return r.some(e=>t.endsWith(e))}(s))&&function(e){let t=i(e);return"localhost"===t||"127.0.0.1"===t||"::1"===t}(s)}}},function(e){e.O(0,[146,513,304,293,528,744],function(){return e(e.s=5654)}),_N_E=e.O()}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[846],{846:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var a=n(7573),r=n(7653),s=n(1695),i=n(6597);let o=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],l=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],u=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],c=new Map(o.map((e,t)=>[e,t])),d=new Map(l.map((e,t)=>[e,t])),m=new Map(u.map((e,t)=>[e,t])),f=new Map([["ㅗㅏ","ㅘ"],["ㅗㅐ","ㅙ"],["ㅗㅣ","ㅚ"],["ㅜㅓ","ㅝ"],["ㅜㅔ","ㅞ"],["ㅜㅣ","ㅟ"],["ㅡㅣ","ㅢ"]]),h=new Map([["ㄱㅅ","ㄳ"],["ㄴㅈ","ㄵ"],["ㄴㅎ","ㄶ"],["ㄹㄱ","ㄺ"],["ㄹㅁ","ㄻ"],["ㄹㅂ","ㄼ"],["ㄹㅅ","ㄽ"],["ㄹㅌ","ㄾ"],["ㄹㅍ","ㄿ"],["ㄹㅎ","ㅀ"],["ㅂㅅ","ㅄ"]]);function p(e){return d.has(e)}function g(e){let t=m.get(e);return"number"==typeof t&&t>0}function y(e,t){let n=function(e){let t=e.trim();return t?(function(e){let t=[],n=0;for(;n<e.length;){let a=e[n],r=e[n+1];if(!c.has(a)||!p(r)){t.push(a),n+=1;continue}let s=r,i=n+2;if(p(e[i])){let t=f.get("".concat(s).concat(e[i]));t&&(s=t,i+=1)}let o="",l=e[i],u=e[i+1],y=e[i+2];if(g(l)){if(g(u)){let e=h.get("".concat(l).concat(u));e&&!p(y)?(o=e,i+=2):p(u)||(o=l,i+=1)}else p(u)||(o=l,i+=1)}let b=function(e,t,n){let a=c.get(e),r=d.get(t),s=m.get(n);return"number"!=typeof a||"number"!=typeof r||"number"!=typeof s?null:String.fromCodePoint(44032+(21*a+r)*28+s)}(a,s,o);b?t.push(b):(t.push(a,s),o&&t.push(o)),n=i}return t.join("")})(function(e){let t=[];for(let n of Array.from(e)){let e=n.codePointAt(0);if("number"==typeof e){if(e>=44032&&e<=55203){let n=e-44032,a=Math.floor(n/588),r=Math.floor(n%588/28),s=n%28;t.push(o[a]),t.push(l[r]),s>0&&t.push(u[s]);continue}if(e>=4352&&e<=4370){t.push(o[e-4352]);continue}if(e>=4449&&e<=4469){t.push(l[e-4449]);continue}if(e>=4520&&e<=4546){t.push(u[e-4520+1]);continue}t.push(n)}}return t}(t.normalize("NFC"))).normalize("NFC"):""}(e);return!Number.isFinite(t)||t<1?n:Array.from(n).slice(0,Math.floor(t)).join("")}var b=n(5118),j=n(5651);function v(e){return Array.from(e).length}function S(){let e=(0,s.useRouter)(),t=(0,j.B)(e=>e.input),n=(0,j.B)(e=>e.setInput),o=(0,j.B)(e=>e.setResults),[l,u]=(0,r.useState)(()=>y(t.surnameHangul,2)),[c,d]=(0,r.useState)(t.surnameHanja),[m,f]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1),[g,S]=(0,r.useState)(null),[N,w]=(0,r.useState)(t.gender),[x,H]=(0,r.useState)({});(0,r.useEffect)(()=>{let e=y(l,2);if(!e){f([]),d(""),S(null),p(!1);return}let t=new AbortController,n=!1;return p(!0),S(null),f([]),(0,b.mS)(e,t.signal).then(e=>{if(!n){if(f(e.options),0===e.options.length){d(""),S("입력한 음과 일치하는 성씨 한자를 찾지 못했습니다.");return}d(t=>{var n;return e.options.some(e=>e.hanja===t)?t:null!==(n=e.autoSelectedHanja)&&void 0!==n?n:e.options[0].hanja})}}).catch(e=>{n||e instanceof DOMException&&"AbortError"===e.name||(console.error("[input] 성씨 한자 조회 실패",e),f([]),d(""),S("성씨 한자 조회 중 오류가 발생했습니다."))}).finally(()=>{n||p(!1)}),()=>{n=!0,t.abort()}},[l]);let P=(0,r.useMemo)(()=>!l.trim()||!c.trim()||h,[l,c,h]);return(0,a.jsx)(i.WR,{title:"네임핏: 우리 아이 이름 찾기",titleIconSrc:"/namefit-mark-inline.svg",titleIconAlt:"네임핏 로고",children:(0,a.jsxs)("form",{className:"tds-form",onSubmit:t=>{t.preventDefault();let a={surnameHangul:y(l,2),surnameHanja:c.trim(),gender:N},r=function(e){let t={},n=e.surnameHangul.trim();(1>v(n)||v(n)>2)&&(t.surnameHangul="성은 1~2글자로 입력해 주세요.");let a=e.surnameHanja.trim();return(1>v(a)||v(a)>2)&&(t.surnameHanja="성씨 한자를 선택해 주세요."),t}(a);H(r),Object.keys(r).length>0||(n(a),o([]),e.push("/loading"))},children:[(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:"성(음) / 성씨 한자"}),(0,a.jsxs)("div",{className:"surname-inline-row",children:[(0,a.jsx)("input",{className:"tds-input surname-inline-input".concat(x.surnameHangul?" is-error":""),type:"text",value:l,placeholder:"김",onChange:e=>{u(y(e.target.value,2)),H(e=>({...e,surnameHangul:void 0,surnameHanja:void 0}))}}),l.trim()?h?(0,a.jsx)("p",{className:"surname-inline-loading",children:"한자 조회 중…"}):m.length>0?(0,a.jsx)("div",{className:"tds-hanja-options",role:"radiogroup","aria-label":"성씨 한자 선택",children:m.map(e=>{let t=c===e.hanja;return(0,a.jsx)("button",{type:"button",className:"tds-hanja-option".concat(t?" is-selected":""),"aria-pressed":t,onClick:()=>{d(e.hanja),H(e=>({...e,surnameHanja:void 0}))},children:(0,a.jsx)("span",{className:"tds-hanja-main",children:e.hanja})},"".concat(e.hanja,"-").concat(e.popularityRank))})}):null:null]}),!h&&g?(0,a.jsx)("span",{className:"tds-error",children:g}):null,x.surnameHangul?(0,a.jsx)("span",{className:"tds-error",children:x.surnameHangul}):null,x.surnameHanja?(0,a.jsx)("span",{className:"tds-error",children:x.surnameHanja}):null]}),(0,a.jsx)(i.dE,{label:"성별",value:N,options:j.P,onChange:w}),(0,a.jsx)(i.Ob,{type:"submit",disabled:P,children:"이름 추천받기"}),(0,a.jsxs)("section",{className:"tds-basic-mode-guide","aria-label":"기본모드 이름 선정 기준",children:[(0,a.jsx)("p",{className:"tds-basic-mode-guide-title",children:"기본모드에서는 아래 기준으로 이름을 선정합니다."}),(0,a.jsxs)("ul",{className:"tds-basic-mode-guide-list",children:[(0,a.jsx)("li",{children:"발음오행: 성과 이름을 붙여 읽었을 때 발음 흐름과 소리 균형을 봅니다."}),(0,a.jsx)("li",{children:"의미: 한자 조합이 전달하는 의미의 조화와 선명도를 봅니다."}),(0,a.jsx)("li",{children:"오행 균형: 성씨와 이름의 오행 조합이 한쪽으로 치우치지 않는지 봅니다."})]}),(0,a.jsx)("p",{className:"tds-basic-mode-guide-note",children:"※ 오행 균형은 사주가 반영된 결과가 아닌, 성+이름의 오행만 반영합니다."})]})]})})}},6597:function(e,t,n){n.d(t,{NV:function(){return o},Ob:function(){return i},Sv:function(){return l},WR:function(){return r},dE:function(){return s}});var a=n(7573);function r(e){let{title:t,description:n,titleIconSrc:r,titleIconAlt:s,children:i}=e;return(0,a.jsx)("main",{className:"tds-screen",children:(0,a.jsxs)("section",{className:"tds-panel",children:[t?(0,a.jsx)("h1",{className:"tds-title",children:(0,a.jsxs)("span",{className:"tds-title-row",children:[r?(0,a.jsx)("img",{className:"tds-title-icon",src:r,alt:null!=s?s:"","aria-hidden":!s||void 0}):null,(0,a.jsx)("span",{children:t})]})}):null,n?(0,a.jsx)("p",{className:"tds-description",children:n}):null,i]})})}function s(e){let{label:t,value:n,options:r,onChange:s}=e;return(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:t}),(0,a.jsx)("div",{className:"tds-segmented",role:"tablist","aria-label":t,children:r.map(e=>(0,a.jsx)("button",{type:"button",className:"tds-segmented-option".concat(n===e.value?" is-selected":""),role:"tab","aria-selected":n===e.value,onClick:()=>s(e.value),children:e.label},e.value))})]})}function i(e){let{children:t,onClick:n,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-primary",onClick:n,disabled:s,children:t})}function o(e){let{children:t,onClick:n,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-secondary",onClick:n,disabled:s,children:t})}function l(e){let{children:t}=e;return(0,a.jsx)("article",{className:"tds-card",children:t})}},5118:function(e,t,n){function a(e){let t=e.startsWith("/")?e:"/".concat(e),n=function(){let e="https://naametoss.vercel.app".trim();return e.endsWith("/")?e.slice(0,-1):e}();return n?"".concat(n).concat(t):t}async function r(e,t){let n=e.trim();if(!n)return{surnameReading:"",options:[],autoSelectedHanja:null};let r=await fetch("".concat(a("/api/surname/options"),"?reading=").concat(encodeURIComponent(n)),{method:"GET",cache:"no-store",signal:t});if(!r.ok){let e=await r.text();throw Error("[api] surname options failed: ".concat(r.status," ").concat(e))}let s=await r.json();if(!(s&&"object"==typeof s&&"string"==typeof s.surnameReading&&Array.isArray(s.options)&&("string"==typeof s.autoSelectedHanja||null===s.autoSelectedHanja)&&s.options.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.hanja&&"boolean"==typeof e.isDefault&&"number"==typeof e.popularityRank&&Number.isFinite(e.popularityRank))))throw Error("[api] invalid surname options response");return s}async function s(e){let t=await fetch(a("/api/recommend/free"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!t.ok){let e=await t.text();throw Error("[api] free recommend failed: ".concat(t.status," ").concat(e))}let n=await t.json();if(!function(e){if(!e||"object"!=typeof e)return!1;let t=e.results;return!!Array.isArray(t)&&t.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.nameHangul&&Array.isArray(e.hanjaPair)&&2===e.hanjaPair.length&&"string"==typeof e.hanjaPair[0]&&"string"==typeof e.hanjaPair[1]&&Array.isArray(e.readingPair)&&2===e.readingPair.length&&"string"==typeof e.readingPair[0]&&"string"==typeof e.readingPair[1]&&Array.isArray(e.meaningKwPair)&&2===e.meaningKwPair.length&&"string"==typeof e.meaningKwPair[0]&&"string"==typeof e.meaningKwPair[1]&&"number"==typeof e.score&&Number.isFinite(e.score)&&Array.isArray(e.reasons))}(n))throw Error("[api] invalid response shape");return{results:n.results.slice(0,5)}}async function i(e){let t=await fetch(a("/api/feedback/name"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!t.ok){let e=await t.text();if(503===t.status&&e.includes("Feedback backend is not configured"))return;throw Error("[api] feedback submit failed: ".concat(t.status," ").concat(e))}}async function o(e){let t=Array.from(e.trim().normalize("NFC")).slice(0,1).join("");if(!t)throw Error("[api] invalid hanja char");let n=await fetch("/api/admin/local/hanja/not-inmyong",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify({char:t})});if(!n.ok){let e=await n.text();throw Error("[api] mark not-inmyong failed: ".concat(n.status," ").concat(e))}}async function l(e){let t=e.trim().normalize("NFC");if(!t)throw Error("[api] invalid nameHangul");let n=await fetch("/api/admin/local/blacklist-word",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify({nameHangul:t})});if(!n.ok){let e=await n.text();throw Error("[api] blacklist update failed: ".concat(n.status," ").concat(e))}return{inserted:!0===(await n.json()).inserted}}n.d(t,{le:function(){return i},mS:function(){return r},o4:function(){return s},yF:function(){return o},zT:function(){return l}})},5651:function(e,t,n){n.d(t,{B:function(){return l},P:function(){return i}});var a=n(8321),r=n(4452);let s={surnameHangul:"",surnameHanja:"",gender:"UNISEX"},i=[{label:"남",value:"MALE"},{label:"여",value:"FEMALE"},{label:"상관없음",value:"UNISEX"}],o=(0,r.FL)(()=>window.sessionStorage),l=(0,a.U)()((0,r.tJ)(e=>({input:s,results:[],hasHydrated:!1,setHasHydrated:t=>e({hasHydrated:t}),setInput:t=>e({input:t}),setResults:t=>e({results:t.slice(0,5).map((e,t)=>{var n;return{...e,score:"number"==typeof(n=e.score)&&Number.isFinite(n)?Math.round(Math.max(0,Math.min(100,n))):Math.max(60,95-3*t),reasons:Array.isArray(e.reasons)&&e.reasons.length>0?e.reasons:["추천 기준을 충족한 이름이에요"]}})}),reset:()=>e({input:s,results:[]})}),{name:"namefit-toss-recommend-store-v1",storage:o,partialize:e=>({input:e.input,results:e.results}),onRehydrateStorage:()=>(e,t)=>{t&&console.error("[store] recommend store rehydrate failed",t),null==e||e.setHasHydrated(!0)}}))},1695:function(e,t,n){var a=n(1219);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},4452:function(e,t,n){function a(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var a;let r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(a=n.getItem(e))?a:null;return s instanceof Promise?s.then(r):r(s)},setItem:(e,a)=>n.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}n.d(t,{FL:function(){return a},tJ:function(){return s}});let r=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>r(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>r(t)(e)}}},s=(e,t)=>(n,s,i)=>{let o,l={storage:a(()=>window.localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},u=!1,c=0,d=new Set,m=new Set,f=l.storage;if(!f)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...e)},s,i);let h=()=>{let e=l.partialize({...s()});return f.setItem(l.name,{state:e,version:l.version})},p=i.setState;i.setState=(e,t)=>(p(e,t),h());let g=e((...e)=>(n(...e),h()),s,i);i.getInitialState=()=>g;let y=()=>{var e,t;if(!f)return;let a=++c;u=!1,d.forEach(e=>{var t;return e(null!=(t=s())?t:g)});let i=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=s())?e:g))||void 0;return r(f.getItem.bind(f))(l.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;if(a!==c)return;let[r,i]=e;if(n(o=l.merge(i,null!=(t=s())?t:g),!0),r)return h()}).then(()=>{a===c&&(null==i||i(o,void 0),o=s(),u=!0,m.forEach(e=>e(o)))}).catch(e=>{a===c&&(null==i||i(void 0,e))})};return i.persist={setOptions:e=>{l={...l,...e},e.storage&&(f=e.storage)},clearStorage:()=>{null==f||f.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>y(),hasHydrated:()=>u,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(m.add(e),()=>{m.delete(e)})},l.skipHydration||y(),o||g}},8321:function(e,t,n){n.d(t,{U:function(){return l}});var a=n(7653);let r=e=>{let t;let n=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(a,r,s);return s},s=e=>e?r(e):r,i=e=>e,o=e=>{let t=s(e),n=e=>(function(e,t=i){let n=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>t(e.getState()),[e,t]),a.useCallback(()=>t(e.getInitialState()),[e,t]));return a.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},l=e=>e?o(e):o}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{8018:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var a=t(7573),r=t(7653),s=t(1695),i=t(6597),o=t(5118),l=t(4578),c=t(4658);let u=["김","이","박","최","정","강","조","윤","장","임","오","한","신","서","권","황","안","송","류","전","홍","유","고","문","양","손","배","백","허","남","심","노","로","하","곽","성","차","주","우","구","나","남궁","제갈","선우","서문","황보","독고","사공","동방"],d=/^[가-힣]{1,2}$/;function m(e,n,t){let a=t.trim();!d.test(a)||n.has(a)||(n.add(a),e.push(a))}var h=t(5651);function f(e){let n=e.trim();return n.length>0?n:"뜻 정보 없음"}function p(e){return"".concat(e.nameHangul,":").concat(e.hanjaPair[0]).concat(e.hanjaPair[1])}function j(){return(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"feedback-icon","aria-hidden":"true",focusable:"false",children:(0,a.jsx)("path",{d:"M7 11v9M7 20H4a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h3m0 8h8.36a2 2 0 0 0 1.96-1.62l1.2-6A2 2 0 0 0 16.56 10H13V6.5A2.5 2.5 0 0 0 10.5 4L7 11Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function y(){return(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"feedback-icon","aria-hidden":"true",focusable:"false",children:(0,a.jsx)("path",{d:"M7 13V4M7 4H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h3m0-8h8.36a2 2 0 0 1 1.96 1.62l1.2 6A2 2 0 0 1 16.56 14H13v3.5A2.5 2.5 0 0 1 10.5 20L7 13Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function g(){let e=(0,s.useRouter)(),n=(0,h.B)(e=>e.input),t=(0,h.B)(e=>e.results),d=(0,h.B)(e=>e.hasHydrated),g=((0,h.B)(e=>e.setInput),(0,h.B)(e=>e.setResults),(0,h.B)(e=>e.reset)),[b,x]=(0,r.useState)({}),[N,w]=(0,r.useState)({}),[k,v]=(0,r.useState)(n.gender),[P,S]=(0,r.useState)(null),[H,A]=(0,r.useState)(null),[E,C]=(0,r.useState)({}),[T,F]=(0,r.useState)(!1),[M,O]=(0,r.useState)({}),[R,L]=(0,r.useState)({}),I=((0,r.useRef)(0),n.surnameHangul.trim().length>0&&n.surnameHanja.trim().length>0);(0,r.useEffect)(()=>{d&&(I||e.replace("/feature/recommend"))},[d,I,e]);let B=(0,r.useMemo)(()=>t.slice(0,5),[t]),K=(0,r.useMemo)(()=>B.map(e=>p(e)),[B]);if((0,r.useMemo)(()=>(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY,a=Number.isFinite(t)?Math.max(1,Math.floor(t)):Number.MAX_SAFE_INTEGER,r=[],s=new Set;for(let t of(m(r,s,e),n)){if(r.length>=a)break;m(r,s,t)}return r.slice(0,a)})(n.surnameHangul),[n.surnameHangul]),(0,r.useEffect)(()=>{x(e=>(0,l.N)(e,K)),w(e=>(0,l.G)(e,K))},[K]),(0,r.useEffect)(()=>{v(n.gender)},[n.gender]),(0,r.useEffect)(()=>{let e=n.surnameHangul.trim(),t=n.surnameHanja.trim();e&&t&&C(n=>n[e]===t?n:{...n,[e]:t})},[n.surnameHangul,n.surnameHanja]),(0,r.useEffect)(()=>{F((0,c.m)({hostname:window.location.hostname}))},[]),!d||!I)return(0,a.jsx)(a.Fragment,{});let V=async(e,t)=>{let a=p(e);if("pending"!==b[a]&&"done"!==b[a]){x(e=>({...e,[a]:"pending"})),w(e=>({...e,[a]:t}));try{await (0,o.le)({surnameHangul:n.surnameHangul,surnameHanja:n.surnameHanja,nameHangul:e.nameHangul,hanjaPair:e.hanjaPair,vote:t}),x(e=>({...e,[a]:"done"}))}catch(e){console.error("[result] feedback submit failed",e),x(e=>({...e,[a]:"idle"})),w(e=>({...e,[a]:void 0}))}}},_=async e=>{let n=e.trim();if(n&&"pending"!==M[n]&&"done"!==M[n]){O(e=>({...e,[n]:"pending"}));try{await (0,o.yF)(n),O(e=>({...e,[n]:"done"}))}catch(e){console.error("[result] mark not-inmyong failed",e),O(e=>({...e,[n]:"error"}))}}},J=async e=>{let n=p(e);if("pending"!==R[n]&&"done"!==R[n]){L(e=>({...e,[n]:"pending"}));try{await (0,o.zT)(e.nameHangul),L(e=>({...e,[n]:"done"}))}catch(e){console.error("[result] blacklist update failed",e),L(e=>({...e,[n]:"error"}))}}};return(0,a.jsxs)(i.TdsScreen,{title:"추천 이름 TOP 5",description:"입력하신 정보를 바탕으로 선별했습니다",children:[0===B.length?(0,a.jsxs)("div",{className:"result-actions",children:[(0,a.jsx)("p",{className:"tds-description",children:"추천 결과가 비어 있어요. 다시 시도해 주세요."}),(0,a.jsx)(i.Ob,{onClick:()=>{e.replace("/loading")},children:"다시 추천받기"})]}):(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)("section",{className:"result-list",children:B.map((e,t)=>{var r;let s=p(e),o="".concat(n.surnameHangul," ").concat(e.readingPair[0]," ").concat(e.readingPair[1]),l=[{hanja:e.hanjaPair[0],reading:e.readingPair[0],meaning:f(e.meaningKwPair[0])},{hanja:e.hanjaPair[1],reading:e.readingPair[1],meaning:f(e.meaningKwPair[1])}];return(0,a.jsxs)(i.Sv,{children:[(0,a.jsx)("div",{className:"result-header-row",children:(0,a.jsxs)("span",{className:"score-chip",children:["추천 적합도 ","number"==typeof(r=e.score)&&Number.isFinite(r)?"".concat(Math.round(r),"%"):"--"]})}),(0,a.jsx)("p",{className:"pron-emphasis",children:o}),(0,a.jsx)("ul",{className:"hanja-detail-list",children:l.map((e,n)=>(0,a.jsxs)("li",{className:"hanja-detail-item",children:[(0,a.jsx)("span",{className:"hanja-char",children:e.hanja}),(0,a.jsx)("span",{className:"hanja-reading",children:e.reading}),(0,a.jsx)("span",{className:"hanja-meaning",children:e.meaning}),T?(0,a.jsx)("button",{type:"button",className:"local-admin-btn".concat("done"===M[e.hanja]?" is-done":""),disabled:"pending"===M[e.hanja],onClick:()=>{_(e.hanja)},children:"한자 로컬 관리 \xb7 비인명용 처리"}):null]},"".concat(e.hanja,"-").concat(e.reading,"-").concat(n)))}),(0,a.jsx)("ul",{className:"reason-list",children:e.reasons.slice(0,3).map((e,n)=>{let{label:t,body:r}=function(e){let n=e.indexOf(":");return n<0?{label:"",body:e.trim()}:{label:e.slice(0,n).trim(),body:e.slice(n+1).trim()}}(e);return t?(0,a.jsxs)("li",{children:[(0,a.jsxs)("strong",{className:"reason-label",children:[t,":"]})," ",r]},"".concat(e,"-").concat(n)):(0,a.jsx)("li",{children:e},"".concat(e,"-").concat(n))})}),(0,a.jsxs)("div",{className:"feedback-row is-split",children:[(0,a.jsx)("button",{type:"button",className:"feedback-btn is-like".concat("like"===N[s]?" is-selected":""),disabled:"pending"===b[s]||"done"===b[s],onClick:()=>{V(e,"like")},children:(0,a.jsxs)("span",{className:"feedback-content",children:[(0,a.jsx)(j,{}),(0,a.jsx)("span",{children:"좋아요"})]})}),(0,a.jsx)("button",{type:"button",className:"feedback-btn is-dislike".concat("dislike"===N[s]?" is-selected":""),disabled:"pending"===b[s]||"done"===b[s],onClick:()=>{V(e,"dislike")},children:(0,a.jsxs)("span",{className:"feedback-content",children:[(0,a.jsx)(y,{}),(0,a.jsx)("span",{children:"싫어요"})]})})]}),T?(0,a.jsx)("div",{className:"local-admin-name-row",children:(0,a.jsx)("button",{type:"button",className:"local-admin-btn".concat("done"===R[s]?" is-done":""),disabled:"pending"===R[s],onClick:()=>{J(e)},children:"이름 블랙리스트 처리"})}):null]},"".concat(e.nameHangul,"-").concat(e.hanjaPair.join(""),"-").concat(t))})}),(0,a.jsxs)("section",{className:"tds-premium-teaser",children:[(0,a.jsx)("h3",{className:"tds-premium-title",children:"유료 모드도 곧 오픈해요 ✨"}),(0,a.jsxs)("ul",{className:"tds-premium-list",children:[(0,a.jsx)("li",{children:"추천 이름 수를 20개로 확대"}),(0,a.jsx)("li",{children:"사주를 반영한 맞춤 결과 제공"}),(0,a.jsx)("li",{children:"이름 의미 심층 분석 리포트 제공"}),(0,a.jsx)("li",{children:"동일 이름의 다양한 한자 조합 제공"})]})]})]}),(0,a.jsx)("div",{className:"result-actions",children:(0,a.jsx)(i.NV,{onClick:()=>{g(),e.replace("/feature/recommend")},children:"다시 입력"})})]})}},6597:function(e,n,t){t.d(n,{M4:function(){return o},NV:function(){return c},Ob:function(){return l},Sv:function(){return m},TdsBottomCtaDouble:function(){return d},TdsLinkButton:function(){return u},TdsScreen:function(){return s},dE:function(){return i}});var a=t(7573),r=t(8146);function s(e){let{title:n,description:t,titleIconSrc:r,titleIconAlt:s,children:i}=e;return(0,a.jsx)("main",{className:"tds-screen",children:(0,a.jsxs)("section",{className:"tds-panel",children:[n?(0,a.jsx)("h1",{className:"tds-title",children:(0,a.jsxs)("span",{className:"tds-title-row",children:[r?(0,a.jsx)("img",{className:"tds-title-icon",src:r,alt:null!=s?s:"","aria-hidden":!s||void 0}):null,(0,a.jsx)("span",{children:n})]})}):null,t?(0,a.jsx)("p",{className:"tds-description",children:t}):null,i]})})}function i(e){let{label:n,value:t,options:r,onChange:s}=e;return(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:n}),(0,a.jsx)("div",{className:"tds-segmented",role:"tablist","aria-label":n,children:r.map(e=>(0,a.jsx)("button",{type:"button",className:"tds-segmented-option".concat(t===e.value?" is-selected":""),role:"tab","aria-selected":t===e.value,onClick:()=>s(e.value),children:e.label},e.value))})]})}function o(e){let{checked:n,label:t,onChange:r}=e;return(0,a.jsxs)("label",{className:"tds-switch-row",children:[(0,a.jsx)("span",{className:"tds-label",children:t}),(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":n,className:"tds-switch".concat(n?" is-on":""),onClick:()=>r(!n),children:(0,a.jsx)("span",{className:"tds-switch-thumb"})})]})}function l(e){let{children:n,onClick:t,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-primary",onClick:t,disabled:s,children:(0,a.jsx)("span",{className:"tds-button-label",children:n})})}function c(e){let{children:n,onClick:t,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-secondary",onClick:t,disabled:s,children:(0,a.jsx)("span",{className:"tds-button-label",children:n})})}function u(e){let{children:n,href:t,variant:s="primary"}=e;return(0,a.jsx)(r.default,{href:t,className:"tds-button ".concat("secondary"===s?"tds-button-secondary":"tds-button-primary"),children:(0,a.jsx)("span",{className:"tds-button-label",children:n})})}function d(e){let{left:n,right:t,topAccessory:r}=e;return(0,a.jsxs)("div",{className:"tds-bottom-cta tds-bottom-cta-double",children:[r?(0,a.jsx)("div",{className:"tds-bottom-cta-top",children:r}):null,(0,a.jsxs)("div",{className:"tds-bottom-cta-actions",children:[(0,a.jsx)("div",{children:n}),(0,a.jsx)("div",{children:t})]})]})}function m(e){let{children:n}=e;return(0,a.jsx)("article",{className:"tds-card",children:n})}},5118:function(e,n,t){function a(e){let n=e.startsWith("/")?e:"/".concat(e),t=function(){let e="https://naametoss.vercel.app".trim();return e.endsWith("/")?e.slice(0,-1):e}();return t?"".concat(t).concat(n):n}async function r(e,n){let t=e.trim();if(!t)return{surnameReading:"",options:[],autoSelectedHanja:null};let r=await fetch("".concat(a("/api/surname/options"),"?reading=").concat(encodeURIComponent(t)),{method:"GET",cache:"no-store",signal:n});if(!r.ok){let e=await r.text();throw Error("[api] surname options failed: ".concat(r.status," ").concat(e))}let s=await r.json();if(!(s&&"object"==typeof s&&"string"==typeof s.surnameReading&&Array.isArray(s.options)&&("string"==typeof s.autoSelectedHanja||null===s.autoSelectedHanja)&&s.options.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.hanja&&"boolean"==typeof e.isDefault&&"number"==typeof e.popularityRank&&Number.isFinite(e.popularityRank))))throw Error("[api] invalid surname options response");return s}async function s(e){let n=await fetch(a("/api/recommend/free"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();throw Error("[api] free recommend failed: ".concat(n.status," ").concat(e))}let t=await n.json();if(!function(e){if(!e||"object"!=typeof e)return!1;let n=e.results;return!!Array.isArray(n)&&n.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.nameHangul&&Array.isArray(e.hanjaPair)&&2===e.hanjaPair.length&&"string"==typeof e.hanjaPair[0]&&"string"==typeof e.hanjaPair[1]&&Array.isArray(e.readingPair)&&2===e.readingPair.length&&"string"==typeof e.readingPair[0]&&"string"==typeof e.readingPair[1]&&Array.isArray(e.meaningKwPair)&&2===e.meaningKwPair.length&&"string"==typeof e.meaningKwPair[0]&&"string"==typeof e.meaningKwPair[1]&&"number"==typeof e.score&&Number.isFinite(e.score)&&Array.isArray(e.reasons))}(t))throw Error("[api] invalid response shape");return{results:t.results.slice(0,5)}}async function i(e){let n=await fetch(a("/api/recommend/premium"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();throw Error("[api] premium recommend failed: ".concat(n.status," ").concat(e))}let t=await n.json();if(!function(e){if(!e||"object"!=typeof e||!e.summary||"object"!=typeof e.summary||!Array.isArray(e.results))return!1;let n=e.summary;return!!(("IMPROVE"===n.mode||"HARMONY"===n.mode)&&"string"==typeof n.oneLineSummary&&Array.isArray(n.weakTop2)&&2===n.weakTop2.length&&"boolean"==typeof n.hasHourPillar&&n.pillars&&"object"==typeof n.pillars&&n.distSaju&&"object"==typeof n.distSaju&&Array.isArray(n.distStatus))&&e.results.every(e=>!!e&&"object"==typeof e&&"number"==typeof e.rank&&Number.isFinite(e.rank)&&"string"==typeof e.nameHangul&&Array.isArray(e.hanjaPair)&&2===e.hanjaPair.length&&"string"==typeof e.hanjaPair[0]&&"string"==typeof e.hanjaPair[1]&&Array.isArray(e.readingPair)&&2===e.readingPair.length&&"string"==typeof e.readingPair[0]&&"string"==typeof e.readingPair[1]&&Array.isArray(e.meaningKwPair)&&2===e.meaningKwPair.length&&"string"==typeof e.meaningKwPair[0]&&"string"==typeof e.meaningKwPair[1]&&"number"==typeof e.score&&Number.isFinite(e.score)&&"number"==typeof e.sajuScore5&&Number.isFinite(e.sajuScore5)&&"number"==typeof e.soundScore5&&Number.isFinite(e.soundScore5)&&"number"==typeof e.engineScore01&&Number.isFinite(e.engineScore01)&&Array.isArray(e.why))}(t))throw Error("[api] invalid premium response shape");return{summary:t.summary,results:t.results.slice(0,20)}}async function o(e){let n=await fetch(a("/api/feedback/name"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();if(503===n.status&&e.includes("Feedback backend is not configured"))return;throw Error("[api] feedback submit failed: ".concat(n.status," ").concat(e))}}async function l(e){let n=Array.from(e.trim().normalize("NFC")).slice(0,1).join("");if(!n)throw Error("[api] invalid hanja char");let t=await fetch("/api/admin/local/hanja/not-inmyong",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify({char:n})});if(!t.ok){let e=await t.text();throw Error("[api] mark not-inmyong failed: ".concat(t.status," ").concat(e))}}async function c(e){let n=e.trim().normalize("NFC");if(!n)throw Error("[api] invalid nameHangul");let t=await fetch("/api/admin/local/blacklist-word",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify({nameHangul:n})});if(!t.ok){let e=await t.text();throw Error("[api] blacklist update failed: ".concat(t.status," ").concat(e))}return{inserted:!0===(await t.json()).inserted}}t.d(n,{le:function(){return o},mS:function(){return r},o4:function(){return s},oj:function(){return i},yF:function(){return l},zT:function(){return c}})},4578:function(e,n,t){function a(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function r(e,n){if(Object.keys(e).length!==n.length)return!1;for(let t of n)if(!a(e,t))return!1;return!0}function s(e,n){let t=!r(e,n),s={};for(let r of n){if(a(e,r)){s[r]=e[r];continue}s[r]="idle",t=!0}return t?s:e}function i(e,n){let t=!r(e,n),s={};for(let r of n){if(a(e,r)){s[r]=e[r];continue}s[r]=void 0,t=!0}return t?s:e}t.d(n,{G:function(){return i},N:function(){return s}})},5651:function(e,n,t){t.d(n,{B:function(){return l},P:function(){return i}});var a=t(8321),r=t(4452);let s={surnameHangul:"",surnameHanja:"",gender:"UNISEX"},i=[{label:"남",value:"MALE"},{label:"여",value:"FEMALE"},{label:"상관없음",value:"UNISEX"}],o=(0,r.FL)(()=>window.sessionStorage),l=(0,a.U)()((0,r.tJ)(e=>({input:s,results:[],hasHydrated:!1,setHasHydrated:n=>e({hasHydrated:n}),setInput:n=>e({input:n}),setResults:n=>e({results:n.slice(0,5).map((e,n)=>{var t;return{...e,score:"number"==typeof(t=e.score)&&Number.isFinite(t)?Math.round(Math.max(0,Math.min(100,t))):Math.max(60,95-3*n),reasons:Array.isArray(e.reasons)&&e.reasons.length>0?e.reasons:["추천 기준을 충족한 이름이에요"]}})}),reset:()=>e({input:s,results:[]})}),{name:"namefit-toss-recommend-store-v1",storage:o,partialize:e=>({input:e.input,results:e.results}),onRehydrateStorage:()=>(e,n)=>{n&&console.error("[store] recommend store rehydrate failed",n),null==e||e.setHasHydrated(!0)}}))},4658:function(e,n,t){t.d(n,{m:function(){return i}});var a=t(8571);let r=[".vercel.app",".apps.tossmini.com",".private-apps.tossmini.com"];function s(e){return e.trim().toLowerCase()}function i(e){let{nodeEnv:n="production",vercel:t=a.env.VERCEL,hostname:i=""}=e;return!("development"!==(null!=n?n:"").trim()||(null!=t?t:"").trim().length>0||!i.trim()||function(e){let n=s(e);return r.some(e=>n.endsWith(e))}(i))&&function(e){let n=s(e);return"localhost"===n||"127.0.0.1"===n||"::1"===n}(i)}}}]);
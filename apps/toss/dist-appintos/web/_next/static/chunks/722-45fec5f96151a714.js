"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{7722:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(7573),r=t(7653),s=t(1695),i=t(6597),l=t(5118);function c(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function o(e,n){if(Object.keys(e).length!==n.length)return!1;for(let t of n)if(!c(e,t))return!1;return!0}let u=["김","이","박","최","정","강","조","윤","장","임","오","한","신","서","권","황","안","송","류","전","홍","유","고","문","양","손","배","백","허","남","심","노","로","하","곽","성","차","주","우","구","나","남궁","제갈","선우","서문","황보","독고","사공","동방"],d=/^[가-힣]{1,2}$/;function m(e,n,t){let a=t.trim();!d.test(a)||n.has(a)||(n.add(a),e.push(a))}var h=t(2914);function f(e){let n=e.trim();return n.length>0?n:"뜻 정보 없음"}function p(e){return"".concat(e.nameHangul,":").concat(e.hanjaPair[0]).concat(e.hanjaPair[1])}function j(){return(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"feedback-icon","aria-hidden":"true",focusable:"false",children:(0,a.jsx)("path",{d:"M7 11v9M7 20H4a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h3m0 8h8.36a2 2 0 0 0 1.96-1.62l1.2-6A2 2 0 0 0 16.56 10H13V6.5A2.5 2.5 0 0 0 10.5 4L7 11Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function g(){return(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"feedback-icon","aria-hidden":"true",focusable:"false",children:(0,a.jsx)("path",{d:"M7 13V4M7 4H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h3m0-8h8.36a2 2 0 0 1 1.96 1.62l1.2 6A2 2 0 0 1 16.56 14H13v3.5A2.5 2.5 0 0 1 10.5 20L7 13Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function b(){let e=(0,s.useRouter)(),n=(0,h.B)(e=>e.input),t=(0,h.B)(e=>e.results),d=((0,h.B)(e=>e.setInput),(0,h.B)(e=>e.setResults),(0,h.B)(e=>e.reset)),[b,x]=(0,r.useState)({}),[y,N]=(0,r.useState)({}),[k,P]=(0,r.useState)(n.gender),[v,w]=(0,r.useState)(null),[S,H]=(0,r.useState)(null),[E,A]=(0,r.useState)({}),M=((0,r.useRef)(0),n.surnameHangul.trim().length>0&&n.surnameHanja.trim().length>0);(0,r.useEffect)(()=>{M||e.replace("/")},[M,e]);let C=(0,r.useMemo)(()=>t.slice(0,5),[t]),O=(0,r.useMemo)(()=>C.map(e=>p(e)),[C]);if((0,r.useMemo)(()=>(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY,a=Number.isFinite(t)?Math.max(1,Math.floor(t)):Number.MAX_SAFE_INTEGER,r=[],s=new Set;for(let t of(m(r,s,e),n)){if(r.length>=a)break;m(r,s,t)}return r.slice(0,a)})(n.surnameHangul),[n.surnameHangul]),(0,r.useEffect)(()=>{x(e=>(function(e,n){let t=!o(e,n),a={};for(let r of n){if(c(e,r)){a[r]=e[r];continue}a[r]="idle",t=!0}return t?a:e})(e,O)),N(e=>(function(e,n){let t=!o(e,n),a={};for(let r of n){if(c(e,r)){a[r]=e[r];continue}a[r]=void 0,t=!0}return t?a:e})(e,O))},[O]),(0,r.useEffect)(()=>{P(n.gender)},[n.gender]),(0,r.useEffect)(()=>{let e=n.surnameHangul.trim(),t=n.surnameHanja.trim();e&&t&&A(n=>n[e]===t?n:{...n,[e]:t})},[n.surnameHangul,n.surnameHanja]),!M)return(0,a.jsx)(a.Fragment,{});let R=async(e,t)=>{let a=p(e);if("pending"!==b[a]&&"done"!==b[a]){x(e=>({...e,[a]:"pending"})),N(e=>({...e,[a]:t}));try{await (0,l.le)({surnameHangul:n.surnameHangul,surnameHanja:n.surnameHanja,nameHangul:e.nameHangul,hanjaPair:e.hanjaPair,vote:t}),x(e=>({...e,[a]:"done"}))}catch(e){console.error("[result] feedback submit failed",e),x(e=>({...e,[a]:"idle"})),N(e=>({...e,[a]:void 0}))}}};return(0,a.jsxs)(i.WR,{title:"추천 이름 TOP 5",description:"입력하신 정보를 바탕으로 선별했습니다",children:[0===C.length?(0,a.jsxs)("div",{className:"result-actions",children:[(0,a.jsx)("p",{className:"tds-description",children:"추천 결과가 비어 있어요. 다시 시도해 주세요."}),(0,a.jsx)(i.Ob,{onClick:()=>{e.replace("/loading")},children:"다시 추천받기"})]}):(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)("section",{className:"result-list",children:C.map((e,t)=>{var r;let s=p(e),l="".concat(n.surnameHangul," ").concat(e.readingPair[0]," ").concat(e.readingPair[1]),c=[{hanja:e.hanjaPair[0],reading:e.readingPair[0],meaning:f(e.meaningKwPair[0])},{hanja:e.hanjaPair[1],reading:e.readingPair[1],meaning:f(e.meaningKwPair[1])}];return(0,a.jsxs)(i.Sv,{children:[(0,a.jsx)("div",{className:"result-header-row",children:(0,a.jsxs)("span",{className:"score-chip",children:["추천 적합도 ","number"==typeof(r=e.score)&&Number.isFinite(r)?"".concat(Math.round(r),"%"):"--"]})}),(0,a.jsx)("p",{className:"pron-emphasis",children:l}),(0,a.jsx)("ul",{className:"hanja-detail-list",children:c.map((e,n)=>(0,a.jsxs)("li",{className:"hanja-detail-item",children:[(0,a.jsx)("span",{className:"hanja-char",children:e.hanja}),(0,a.jsx)("span",{className:"hanja-reading",children:e.reading}),(0,a.jsx)("span",{className:"hanja-meaning",children:e.meaning})]},"".concat(e.hanja,"-").concat(e.reading,"-").concat(n)))}),(0,a.jsx)("ul",{className:"reason-list",children:e.reasons.slice(0,3).map((e,n)=>{let{label:t,body:r}=function(e){let n=e.indexOf(":");return n<0?{label:"",body:e.trim()}:{label:e.slice(0,n).trim(),body:e.slice(n+1).trim()}}(e);return t?(0,a.jsxs)("li",{children:[(0,a.jsxs)("strong",{className:"reason-label",children:[t,":"]})," ",r]},"".concat(e,"-").concat(n)):(0,a.jsx)("li",{children:e},"".concat(e,"-").concat(n))})}),(0,a.jsxs)("div",{className:"feedback-row is-split",children:[(0,a.jsx)("button",{type:"button",className:"feedback-btn is-like".concat("like"===y[s]?" is-selected":""),disabled:"pending"===b[s]||"done"===b[s],onClick:()=>{R(e,"like")},children:(0,a.jsxs)("span",{className:"feedback-content",children:[(0,a.jsx)(j,{}),(0,a.jsx)("span",{children:"좋아요"})]})}),(0,a.jsx)("button",{type:"button",className:"feedback-btn is-dislike".concat("dislike"===y[s]?" is-selected":""),disabled:"pending"===b[s]||"done"===b[s],onClick:()=>{R(e,"dislike")},children:(0,a.jsxs)("span",{className:"feedback-content",children:[(0,a.jsx)(g,{}),(0,a.jsx)("span",{children:"싫어요"})]})})]})]},"".concat(e.nameHangul,"-").concat(e.hanjaPair.join(""),"-").concat(t))})}),(0,a.jsxs)("section",{className:"tds-premium-teaser",children:[(0,a.jsx)("h3",{className:"tds-premium-title",children:"유료 모드도 곧 오픈해요 ✨"}),(0,a.jsxs)("ul",{className:"tds-premium-list",children:[(0,a.jsx)("li",{children:"추천 이름 수를 20개로 확대"}),(0,a.jsx)("li",{children:"사주를 반영한 맞춤 결과 제공"}),(0,a.jsx)("li",{children:"이름 의미 심층 분석 리포트 제공"}),(0,a.jsx)("li",{children:"동일 이름의 다양한 한자 조합 제공"})]})]})]}),(0,a.jsx)("div",{className:"result-actions",children:(0,a.jsx)(i.NV,{onClick:()=>{d(),e.replace("/")},children:"다시 입력"})})]})}},6597:function(e,n,t){t.d(n,{NV:function(){return l},Ob:function(){return i},Sv:function(){return c},WR:function(){return r},dE:function(){return s}});var a=t(7573);function r(e){let{title:n,description:t,titleIconSrc:r,titleIconAlt:s,children:i}=e;return(0,a.jsx)("main",{className:"tds-screen",children:(0,a.jsxs)("section",{className:"tds-panel",children:[n?(0,a.jsx)("h1",{className:"tds-title",children:(0,a.jsxs)("span",{className:"tds-title-row",children:[r?(0,a.jsx)("img",{className:"tds-title-icon",src:r,alt:null!=s?s:"","aria-hidden":!s||void 0}):null,(0,a.jsx)("span",{children:n})]})}):null,t?(0,a.jsx)("p",{className:"tds-description",children:t}):null,i]})})}function s(e){let{label:n,value:t,options:r,onChange:s}=e;return(0,a.jsxs)("div",{className:"tds-field",children:[(0,a.jsx)("span",{className:"tds-label",children:n}),(0,a.jsx)("div",{className:"tds-segmented",role:"tablist","aria-label":n,children:r.map(e=>(0,a.jsx)("button",{type:"button",className:"tds-segmented-option".concat(t===e.value?" is-selected":""),role:"tab","aria-selected":t===e.value,onClick:()=>s(e.value),children:e.label},e.value))})]})}function i(e){let{children:n,onClick:t,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-primary",onClick:t,disabled:s,children:n})}function l(e){let{children:n,onClick:t,type:r="button",disabled:s=!1}=e;return(0,a.jsx)("button",{type:r,className:"tds-button tds-button-secondary",onClick:t,disabled:s,children:n})}function c(e){let{children:n}=e;return(0,a.jsx)("article",{className:"tds-card",children:n})}},5118:function(e,n,t){function a(e){let n=e.startsWith("/")?e:"/".concat(e),t=function(){let e="https://api.namefit.example".trim();return e.endsWith("/")?e.slice(0,-1):e}();return t?"".concat(t).concat(n):n}async function r(e,n){let t=e.trim();if(!t)return{surnameReading:"",options:[],autoSelectedHanja:null};let r=await fetch("".concat(a("/api/surname/options"),"?reading=").concat(encodeURIComponent(t)),{method:"GET",cache:"no-store",signal:n});if(!r.ok){let e=await r.text();throw Error("[api] surname options failed: ".concat(r.status," ").concat(e))}let s=await r.json();if(!(s&&"object"==typeof s&&"string"==typeof s.surnameReading&&Array.isArray(s.options)&&("string"==typeof s.autoSelectedHanja||null===s.autoSelectedHanja)&&s.options.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.hanja&&"boolean"==typeof e.isDefault&&"number"==typeof e.popularityRank&&Number.isFinite(e.popularityRank))))throw Error("[api] invalid surname options response");return s}async function s(e){let n=await fetch(a("/api/recommend/free"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();throw Error("[api] free recommend failed: ".concat(n.status," ").concat(e))}let t=await n.json();if(!function(e){if(!e||"object"!=typeof e)return!1;let n=e.results;return!!Array.isArray(n)&&n.every(e=>!!e&&"object"==typeof e&&"string"==typeof e.nameHangul&&Array.isArray(e.hanjaPair)&&2===e.hanjaPair.length&&"string"==typeof e.hanjaPair[0]&&"string"==typeof e.hanjaPair[1]&&Array.isArray(e.readingPair)&&2===e.readingPair.length&&"string"==typeof e.readingPair[0]&&"string"==typeof e.readingPair[1]&&Array.isArray(e.meaningKwPair)&&2===e.meaningKwPair.length&&"string"==typeof e.meaningKwPair[0]&&"string"==typeof e.meaningKwPair[1]&&"number"==typeof e.score&&Number.isFinite(e.score)&&Array.isArray(e.reasons))}(t))throw Error("[api] invalid response shape");return{results:t.results.slice(0,5)}}async function i(e){let n=await fetch(a("/api/feedback/name"),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(e)});if(!n.ok){let e=await n.text();if(503===n.status&&e.includes("Feedback backend is not configured"))return;throw Error("[api] feedback submit failed: ".concat(n.status," ").concat(e))}}t.d(n,{le:function(){return i},mS:function(){return r},o4:function(){return s}})},2914:function(e,n,t){let a;t.d(n,{P:function(){return u},B:function(){return d}});var r=t(7653);let s=e=>{let n;let t=new Set,a=(e,a)=>{let r="function"==typeof e?e(n):e;if(!Object.is(r,n)){let e=n;n=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},n,r),t.forEach(t=>t(n,e))}},r=()=>n,s={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(t.add(e),()=>t.delete(e))},i=n=e(a,r,s);return s},i=e=>e?s(e):s,l=e=>e,c=e=>{let n=i(e),t=e=>(function(e,n=l){let t=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>n(e.getState()),[e,n]),r.useCallback(()=>n(e.getInitialState()),[e,n]));return r.useDebugValue(t),t})(n,e);return Object.assign(t,n),t},o={surnameHangul:"",surnameHanja:"",gender:"UNISEX"},u=[{label:"남",value:"MALE"},{label:"여",value:"FEMALE"},{label:"상관없음",value:"UNISEX"}],d=(a=e=>({input:o,results:[],setInput:n=>e({input:n}),setResults:n=>e({results:n.slice(0,5).map((e,n)=>{var t;return{...e,score:"number"==typeof(t=e.score)&&Number.isFinite(t)?Math.round(Math.max(0,Math.min(100,t))):Math.max(60,95-3*n),reasons:Array.isArray(e.reasons)&&e.reasons.length>0?e.reasons:["추천 기준을 충족한 이름이에요"]}})}),reset:()=>e({input:o,results:[]})}))?c(a):c},1695:function(e,n,t){var a=t(1219);t.o(a,"useParams")&&t.d(n,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(n,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(n,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(n,{useSearchParams:function(){return a.useSearchParams}})}}]);